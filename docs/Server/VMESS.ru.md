# VMESS

**Что такое VMESS?**
VMESS — это более старый прокси-протокол, разработанный V2Ray. Он поддерживает передачу трафика через WebSockets, TCP, KCP, HTTP, gRPC и др. Несмотря на возраст, иногда он более безопасен, чем VLESS — особенно если TLS скомпрометирован — потому что в нём встроено AES-шифрование. Его также можно использовать вместе с CDN.

---

### Объяснение терминов

| **Термин**                         | **Определение**                                                                                                                 |
| ---------------------------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| **VMESS**                          | Более старый прокси-протокол, разработанный V2Ray, поддерживающий несколько способов передачи данных.                           |
| **V2Ray**                          | Платформа для создания прокси-инструментов, разработавшая и VMESS, и VLESS.                                                     |
| **WebSockets (WS)**                | Протокол передачи, используемый для туннелирования трафика VMESS через HTTP-дружественные соединения.                           |
| **TCP**                            | Стандартный протокол передачи данных, поддерживаемый VMESS для надёжной передачи.                                               |
| **KCP**                            | Транспортный уровень на базе UDP для уменьшения задержек, поддерживаемый VMESS.                                                 |
| **HTTP**                           | Распространённый веб-протокол, через который VMESS может туннелировать для обхода цензуры.                                      |
| **gRPC**                           | Высокопроизводительный RPC-протокол, который VMESS использует для передачи трафика.                                             |
| **AES Encryption**                 | Симметричный метод шифрования, встроенный в VMESS, обеспечивающий дополнительную безопасность даже при компрометации TLS.       |
| **CDN (Content Delivery Network)** | Распределённая сеть серверов, которую можно использовать с VMESS для маскировки трафика и повышения устойчивости к блокировкам. |
| **TLS (Transport Layer Security)** | Протокол шифрования для защиты трафика, часто используемый вместе с VMESS.                                                      |

---

## Настройка: **VMESS + WS + TLS + AES**

### Требования

- Доменное имя с Cloudflare
- **Linux** VPS с пробросом портов 443 и случайного порта
- Базовые навыки работы с командной строкой
- Доступ root

---

### Установка X-UI

1. Чтобы установить **X-UI**, выполните в терминале:

```bash
bash <(curl -Ls https://raw.githubusercontent.com/mhsanaei/3x-ui/master/install.sh)
```

> Следуйте инструкциям на экране. Обязательно включите **автозапуск системы**.

---

### Отключение фаервола

Если у вас дистрибутив на базе Debian:

1. Если `ufw` не установлен, установите:

```bash
sudo apt install ufw
```

2. Отключите фаервол:

```bash
sudo ufw disable
```

---

### Доступ к панели X-UI

1. Откройте браузер и перейдите по адресу:

```
http://<ip-сервера>:<ваш-порт>
```

Этот адрес появится после запуска X-UI командой `sudo x-ui`.

2. Войдите, используя учётные данные.

---

### Генерация самоподписанного сертификата

```bash
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout selfsigned.key -out selfsigned.crt
```

Убедитесь, что OpenSSL установлен. При запросах введите:

- **Код страны (2 буквы)** — например, US
- **Общее имя (CN)** — ваш домен (например, example.com)
- Остальное можно пропустить или заполнить по необходимости.

---

### Настройка VMESS Endpoint

1. Выберите **"Inbounds"**.
2. Нажмите **"+"** для создания нового inbound.
3. Настройте параметры так:

```
Remark: Имя вашего сервера
Protocol: VMESS
Listening IP: оставить пустым (по умолчанию)
Port: 443
Total Traffic (GB): оставить пустым
Expiry Date: оставить пустым
Disable Insecure Encryption: Отключено
Transmission: ws
Accept Proxy Protocol: Отключено
Path: /
TLS: Включено
Domain Name: Ваш домен
Загрузите Certificate.crt и Private.key
Sniffing: Включено
```

4. Нажмите **"Add To"** для сохранения.

---

### Проброс порта 443

1. Зайдите в панель управления или настройки роутера VPS.
2. Пробросьте порт **443**.

---

### Настройка Cloudflare

1. Активируйте ваш домен в Cloudflare, если ещё не сделали этого.
2. Создайте **A-запись**, указывающую на публичный IP VPS. Включите прокси (оранжевый значок).
3. В разделе **SSL/TLS** Cloudflare выберите режим **Full** (не Full Strict).

---

## Готово!

В X-UI нажмите **Operate** на вашем inbound, затем нажмите **QR Code**. Этот QR-код можно использовать для импорта настроек в клиент или скопировать ссылку для шаринга.

Обязательно включите AES-шифрование в клиенте, отредактировав конфигурацию.

> **Подсказка:** Ознакомьтесь с документацией вашего клиента или найдите инструкции в интернете по настройке.
